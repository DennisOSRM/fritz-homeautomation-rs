use serde::{Deserialize,Deserializer};

#[derive(Debug, Deserialize)]
pub struct Test {
    #[serde(deserialize_with = "maybe_number")]
    voltage: u32,
}

fn maybe_number<'de, D>(d: D) -> Result<u32, D::Error>
where
    D: Deserializer<'de>,
{
    let s = String::deserialize(d)?;
    match &s[..] {
        "" => Ok(0),
        _ => Ok(s.parse::<u32>().unwrap()),
    }
}


fn main() {
    let xml = r##"
<Test>
<voltage>
</voltage>
</Test>
"##;

    let parsed: Test = serde_xml_rs::from_str(xml).unwrap();

    println!("{:#?}", parsed);
}
